<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
  {%- seo -%}
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}

  <!-- Bootstrap CSS -->  
  <link rel="stylesheet" href="{{ "/assets/css/bootstrap/dist/css/bootstrap.min.css" | relative_url }}">

  <!-- Template betagouv CSS -->
  <link href="https://unpkg.com/template.data.gouv.fr@1.3.1/dist/main.min.css" rel="stylesheet">
  
  <!-- CSS particuliers -->
  <link rel="stylesheet" href="{{ "/assets/css/style.css" | relative_url }}">

  <script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=default%2Ces2015%2Ces2016%2Ces2017%2Ces2018%2Ces2019%2Ces5%2Ces6%2Ces7"></script>

  <script>
    // adapted from https://github.com/ungap/promise-all-settled/blob/ed43b3d9bc2027789c4388aff198141b4feb8f04/esm/index.js (ISC licence)
    if(!Promise.allSettled){
      Promise.allSettled = function ($) {'use strict';
        var self = this;
        return self.all(
          $.map(
            function (value) {
              return self.resolve(value).then(this.$, this._);
            },
            {
              $: function (value) {
                return {status: 'fulfilled', value: value};
              },
              _: function (reason) {
                return {status: 'rejected', reason: reason};
              }
            }
          )
        );
      };
    }

  </script>

{% comment %} 
Styles are added based on the page.styles variable
This variable is defined in front-matter with:

---
styles:
    - href: "./yo.css"
    - href: "./font-maybe.css"
---

{% endcomment %}

    {%- if page.styles -%} {%- for style in page.styles -%}
    <link crossorigin="anonymous" rel="stylesheet" href="{{ style.href }}">
    {%- endfor -%} {%- endif -%}



{% comment %} 
Scripts are added based on the page.scripts variable
This variable is defined in front-matter with:

---
scripts:
    - src: "./script1.js"
      defer: true
      async: false
      crossorigin: "anonymous"
    - src: "./script2.js"
      defer: true
      type: "module"
---

{% endcomment %}

    {%- if page.scripts -%} {%- for script in page.scripts -%}
    <script src="{{ script.src }}" 
        {% if script.type %} type="{{ script.type }}" {% endif %}
        {% if script.defer %} defer {% endif %}
        {% if script.async %} async {% endif %}
        crossorigin="{% if script.crossorigin %}{{ script.crossorigin }}{% else %}anonymous{% endif %}"></script>
    {%- endfor -%} {%- endif -%}

  <!-- Matomo -->
<script type="text/javascript">
  var _paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://stats.data.gouv.fr/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '161']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
</head>
